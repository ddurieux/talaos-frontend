<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Talaos</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href="css/styles.css" rel="stylesheet">
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/angular-route.min.js"></script>
    <script type="text/javascript" src="js/underscore-min.js"></script>
    <script type="text/javascript" src="js/restangular.min.js"></script>
    <script type="text/javascript" src="js/angular-filter.min.js"></script>
    <script type="text/javascript" src="js/ui-bootstrap-0.11.2.min.js"></script>
    <script type="text/javascript" src="js/angular-sanitize.min.js"></script>
    <script type="text/javascript" src="angular-query-builder.js"></script>
    
    <script src="app.js"></script>
  </head>

  <body>
    <div ng-app="asset">
    <div ng-view></div>
  
    <script type="text/ng-template" id="menu.html">
    <header class="navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-3" ng-click="isCollapsed = !isCollapsed">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand visible-xs" href="#">UI Bootstrap</a>
          </div>
          <nav class="hidden-xs">
            <ul class="nav navbar-nav">
              <a href="#" role="button" class="navbar-brand">
                  Talaos
              </a>
          <li ng-repeat="item in items | unique: 'menu' | orderBy:'menu'" ng-show="item.name" class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{item.menu}} <b class="caret"></b></a>
              <ul class="dropdown-menu">
                  <li ng-repeat="item1 in items | orderBy:'name' | filter:{'menu':item.menu}" ng-show="item.name">
                      <a href="#{{item1.item}}">{{item1.name}}</a>
                  </li>
              </ul>
          </li>
        </ul>
    </div>
</li>  
          </ul>
          </nav>
      </div>
    </header>
   </script>

    <!-- CACHE FILE: home.html -->
    <script type="text/ng-template" id="home.html">
    <ng-include src="'menu.html'"></ng-include>
    <div class="container-fluid">
    <div class="row-fluid">
    <pre>
    
    <h4>Hello in Talaos !</h4>
    </pre>
    </div>
    </div>
    
    </script>
   
   
    <!-- CACHE FILE: list.html -->
    <script type="text/ng-template" id="list.html">
    <ng-include src="'menu.html'"></ng-include>
    <div class="container" ng-controller="QueryBuilderCtrl">
        <div class="alert alert-info">
            <strong>Debug output</strong><br>
            <span ng-bind-html="output"></span>
        </div>
        <query-builder group="filter.group"></query-builder>
        <center><button ng-click="sendToBackend()" class="btn btn-sm btn-success"><span class="glyphicon glyphicon-ok"></span> Validate</button></center>
    </div>
    
<!--      <input type="text" ng-model="search" class="form-control" placeholder="Search"> -->
      <table class="table table-striped table-condensed table-hover">
        <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Serial number</th>
          <span ng-if="item.route == 'asset'">
            <th>Assettype</th>
          </span>
          <th><a href="#/{{list.route}}/new"><i class="glyphicon glyphicon-plus-sign"></i></a></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="item in list._items" ng-show="item.id" ng-if="list._items.length > 0">
          <td>{{item.id}}</td>
          <td>{{item.name}}</td>
          <td></td>
          <span ng-if="item.route == 'asset'">
            <td>{{item.asset_type.name}}</td>
          </span>
          <td>
            <a href="#/{{list.route}}/edit/{{item.id}}"><i class="glyphicon glyphicon-pencil"></i></a>
          </td>
        </tr>
        </tbody>
      </table>
      <pre ng-if="list._items.length > 0">
         <button ng-click='previousPage()' ng-if='list._links.prev'>Previous</button> <i>Page {{list._meta.page}} | {{(list._meta.max_results * list._meta.page) - list._meta.max_results + 1}}-{{((list._meta.max_results * list._meta.page) - list._meta.max_results) + list._items.length}} ({{list._meta.total}} elements)</i> <button ng-click='nextPage()' ng-if='list._links.next'>Next</button>
      </pre>
    </script>
<script type="text/ng-template" id="/queryBuilderDirective.html">
<div class="alert alert-warning alert-group">
    <div class="form-inline">
        <select ng-options="o.name as o.name for o in operators" ng-model="group.operator" class="form-control input-sm"></select>
        <button style="margin-left: 5px" ng-click="addCondition()" ng-if="displayAddCondition" class="btn btn-sm btn-success"><span class="glyphicon glyphicon-plus-sign"></span> Add Condition</button>
        <button style="margin-left: 5px" ng-click="addGroup()" ng-if="displayButtons" class="btn btn-sm btn-success"><span class="glyphicon glyphicon-plus-sign"></span> Add Group</button>
        <button style="margin-left: 5px" ng-click="removeGroup()" class="btn btn-sm btn-danger"><span class="glyphicon glyphicon-minus-sign"></span> Remove Group</button>
    </div>
    <div class="group-conditions">
        <div ng-repeat="rule in group.rules | orderBy:'index'" class="condition">
            <div ng-switch="rule.hasOwnProperty('group')">
                <div ng-switch-when="true">
                    <query-builder group="rule.group"></query-builder>
                </div>
                <div ng-switch-default="ng-switch-default">
                    <div class="form-inline">
                        <select ng-options="t.id as t.name for t in assettypes | orderBy:'name'" ng-model="selectedAssettype" class="form-control input-sm" ng-change="assettypeChanged(selectedAssettype, $id, this)"></select>
                        <select ng-if="this.fields.length > 0" ng-options="t.id as t.name for t in this.fields" ng-model="rule.field" class="form-control input-sm"></select>
                        <select style="margin-left: 5px" ng-options="c.name as c.name for c in conditions" ng-model="rule.condition" class="form-control input-sm"></select>
                        <input style="margin-left: 5px" type="text" ng-model="rule.data" class="form-control input-sm"/>
                        / <select style="margin-left: 5px" ng-options="c.value as c.name for c in assetchild" ng-model="rule.assetchild" class="form-control input-sm"></select>
                        <button style="margin-left: 5px" ng-click="removeCondition($index)" ng-if="displayButtons" class="btn btn-sm btn-danger"><span class="glyphicon glyphicon-minus-sign"></span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</script>
  
  
  
    <!-- CACHE FILE: detail.html -->
    <script type="text/ng-template" id="detail.html">
       <ng-include src="'menu.html'"></ng-include>
      <div class="container-fluid">
      <div class="row-fluid">
      <form>
      
  <div class="well well-lg form-group">
  <fieldset>
    <legend>{{itemtypename}}</legend>
            <div ng-repeat="(kitem, dt) in meta" ng-show="dt.label">
            <span ng-switch on="dt.type">  
              <span ng-switch-when="string">  
                <label>{{dt.label}}</label>
                <input ng-model="item[kitem]" type="text" class="form-control" />  
              </span>  
      
              <span ng-switch-when="boolean">  
                <label>
                 <input ng-model="item[kitem]" ng-checked="item[kitem]" type="checkbox"/>  
                 {{dt.label}}</label>
              </span>  
      
              <span ng-switch-when="integer">  
                <label>{{dt.label}}</label>
                
                <div ng-if="foreignlist[kitem]">
                  <select name="item[kitem]" ng-model="item[kitem]"
                        ng-options="sel.id as sel.name for sel in foreignlist[kitem].data"></select>
                </div>
                
                <div ng-if="!foreignlist[kitem]">
                <select class="form-control" ng-model="item[kitem]">
                  <option>0</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>7</option>
                  <option>8</option>
                  <option>9</option>
                  <option>10</option>
                  <option>11</option>
                  <option>12</option>
                  <option>13</option>
                  <option>14</option>
                  <option>15</option>
                  <option>16</option>
                  <option>17</option>
                </select>    
                </div>
              </span>  
      
              <span ng-switch-when="datetime">  
                <label>{{dt.label}}</label>
                <div class="dropdown">
                  <a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown" data-target="#" href="#">
                    <div class="input-group"><input type="text" class="form-control" data-ng-model="item[kitem]"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                    </div>
                  </a>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <datetimepicker data-ng-model="item[kitem]" data-datetimepicker-config="{ dropdownSelector: '#dropdown2' }"/>
                  </ul>
                </div>      
              </span>

              <span ng-switch-when="text">  
                <label>{{dt.label}}</label>
                <textarea ng-model="item[kitem]" type="text" class="form-control">{{item[kitem]}}</textarea>  
              </span>
    
              <span ng-switch-default>  
                  <strong>[ Unknown widget : {{dt.type}} ]</strong>  
              </span>  
            </span>         
       
            </div>
     </fieldset>
   </div>      

        <span ng-if="itemtypename == 'Asset'">
            <div class="form-group">
              <label class="col-sm-2 control-label">Asset type</label>
              <select name="assettypes_id" ng-model="item.assettypes_id"
                    ng-options="assettype.id as assettype.name for assettype in assettypes"></select>
            </div>
        </span>

        <div class="well well-lg">Add
        <span ng-repeat="(key, relatedmodel) in possiblerelatedmodels">
            <button ng-click="addNewRelatedModel(key)" class="btn btn-primary">{{key}}</button>
        </span>
        </div>

        <div class="form-group" data-ng-repeat="(key, relatedmodel) in relatedmodels track by key">
            <div class="well well-lg form-group">
  <fieldset>
    <legend>{{key}}</legend>
            <div ng-repeat="(kitem, item) in relatedmodel.meta" ng-show="item.label">
       
<span ng-switch on="item.type">  
  <span ng-switch-when="string">  
    <label>{{item.label}}</label>
    <input ng-model="relatedmodel.data[kitem]" type="text" class="form-control" />  
  </span>  
  <span ng-switch-when="boolean">  
    <label>
     <input ng-model="relatedmodel.data[kitem]" ng-checked="relatedmodel.data[kitem]" type="checkbox"/>  
     {{item.label}}</label>
  </span>  
  <span ng-switch-when="integer">  
    <label>{{item.label}}</label>
    <select class="form-control" ng-model="relatedmodel.data[kitem]">
      <option>0</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>10</option>
      <option>11</option>
      <option>12</option>
      <option>13</option>
      <option>14</option>
      <option>15</option>
      <option>16</option>
      <option>17</option>
    </select>    
  </span>  
  <span ng-switch-default>  
      <span class="form-control">Unknown widget</span>  
  </span>  
</span>         
       
            </div>
     </fieldset>
            </div>
        </div>

        <br>
        <a href="#/{{item.route}}" class="btn btn-default">Cancel</a>
        <button ng-click="save()" ng-disabled="isClean() || myForm.$invalid"
                class="btn btn-primary">Save</button>
        <button ng-click="destroy()"
                ng-show="item.id" class="btn btn-danger">Delete</button>
      </form>
      </div>
      </div>
    </script>
  </div>

  </body>

</html>

